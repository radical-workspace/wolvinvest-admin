{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/berke/wolv-admin/wolv-admin-main/lib/supabaseClient.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\r\n"],"names":[],"mappings":";;;AAEoB;AAFpB;;AAEA,MAAM,cAAc,+RAAA,CAAA,UAAO,CAAC,GAAG,CAAC,wBAAwB;AACxD,MAAM,kBAAkB,+RAAA,CAAA,UAAO,CAAC,GAAG,CAAC,6BAA6B;AAE1D,MAAM,WAAW,CAAA,GAAA,oQAAA,CAAA,eAAY,AAAD,EAAE,aAAa","debugId":null}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/berke/wolv-admin/wolv-admin-main/lib/AuthContext.tsx"],"sourcesContent":["'use client';\r\nimport { createContext, useContext, useEffect, useState } from 'react';\r\nimport { supabase } from './supabaseClient';\r\nimport type { Session, User } from '@supabase/supabase-js';\r\n\r\ntype UserProfile = User & { role?: string };\r\ntype AuthContextType = {\r\n  session: Session | null;\r\n  user: UserProfile | null;\r\n  signIn: (email: string, password: string) => Promise<any>;\r\n  signUp: (email: string, password: string) => Promise<any>;\r\n  signOut: () => Promise<void>;\r\n};\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\r\n  const [session, setSession] = useState<Session | null>(null);\r\n  const [user, setUser] = useState<UserProfile | null>(null);\r\n\r\n  useEffect(() => {\r\n    supabase.auth.getSession().then(({ data }) => setSession(data.session));\r\n    const { data: listener } = supabase.auth.onAuthStateChange((_event, session) => setSession(session));\r\n    return () => { listener.subscription.unsubscribe(); };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    async function fetchUserProfile() {\r\n      if (session?.user) {\r\n        const { data } = await supabase.from('users').select('*, role').eq('id', session.user.id).single();\r\n        setUser({ ...session.user, ...data });\r\n      } else {\r\n        setUser(null);\r\n      }\r\n    }\r\n    fetchUserProfile();\r\n  }, [session]);\r\n\r\n  const signIn = async (email: string, password: string) => await supabase.auth.signInWithPassword({ email, password });\r\n  const signUp = async (email: string, password: string) => await supabase.auth.signUp({ email, password });\r\n  const signOut = async () => { await supabase.auth.signOut(); setSession(null); setUser(null); };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ session, user, signIn, signUp, signOut }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useAuth() {\r\n  const ctx = useContext(AuthContext);\r\n  if (!ctx) throw new Error('useAuth must be used within AuthProvider');\r\n  return ctx;\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;AAFA;;;AAcA,MAAM,4BAAc,CAAA,GAAA,4RAAA,CAAA,gBAAa,AAAD,EAA+B;AAExD,SAAS,aAAa,KAA2C;QAA3C,EAAE,QAAQ,EAAiC,GAA3C;;IAC3B,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,4RAAA,CAAA,WAAQ,AAAD,EAAkB;IACvD,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,4RAAA,CAAA,WAAQ,AAAD,EAAsB;IAErD,CAAA,GAAA,4RAAA,CAAA,YAAS,AAAD;kCAAE;YACR,wHAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI;0CAAC;wBAAC,EAAE,IAAI,EAAE;2BAAK,WAAW,KAAK,OAAO;;;YACrE,MAAM,EAAE,MAAM,QAAQ,EAAE,GAAG,wHAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,iBAAiB;0CAAC,CAAC,QAAQ,UAAY,WAAW;;YAC3F;0CAAO;oBAAQ,SAAS,YAAY,CAAC,WAAW;gBAAI;;QACtD;iCAAG,EAAE;IAEL,CAAA,GAAA,4RAAA,CAAA,YAAS,AAAD;kCAAE;YACR,eAAe;gBACb,IAAI,oBAAA,8BAAA,QAAS,IAAI,EAAE;oBACjB,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,wHAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,SAAS,MAAM,CAAC,WAAW,EAAE,CAAC,MAAM,QAAQ,IAAI,CAAC,EAAE,EAAE,MAAM;oBAChG,QAAQ;wBAAE,GAAG,QAAQ,IAAI;wBAAE,GAAG,IAAI;oBAAC;gBACrC,OAAO;oBACL,QAAQ;gBACV;YACF;YACA;QACF;iCAAG;QAAC;KAAQ;IAEZ,MAAM,SAAS,OAAO,OAAe,WAAqB,MAAM,wHAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC;YAAE;YAAO;QAAS;IACnH,MAAM,SAAS,OAAO,OAAe,WAAqB,MAAM,wHAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,MAAM,CAAC;YAAE;YAAO;QAAS;IACvG,MAAM,UAAU;QAAc,MAAM,wHAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,OAAO;QAAI,WAAW;QAAO,QAAQ;IAAO;IAE9F,qBACE,4TAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAS;YAAM;YAAQ;YAAQ;QAAQ;kBACnE;;;;;;AAGP;GA/BgB;KAAA;AAiCT,SAAS;;IACd,MAAM,MAAM,CAAA,GAAA,4RAAA,CAAA,aAAU,AAAD,EAAE;IACvB,IAAI,CAAC,KAAK,MAAM,IAAI,MAAM;IAC1B,OAAO;AACT;IAJgB","debugId":null}}]
}